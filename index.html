<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Квадратные Мандорины — Магазин</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">Квадратные Мандорины</div>
    <nav>
      <a href="cart.html">Корзина (<span id="cartCount">0</span>)</a>
    </nav>
  </header>

  <main class="container">
    <h2>Популярные товары</h2>
    <div class="grid">
      <div class="product" data-name="Классическая квадратная" data-price="7.99">
        <img src="images/product-1.jpg" alt="Классическая квадратная">
        <h3>Классическая квадратная</h3>
        <div class="price">$7.99</div>
        <button class="btn" onclick="addToCart(this)">Добавить в корзину</button>
      </div>
      <div class="product" data-name="Мандарин-Гурман" data-price="12.50">
        <img src="images/product-2.jpg" alt="Мандарин-Гурман">
        <h3>Мандарин-Гурман</h3>
        <div class="price">$12.50</div>
        <button class="btn" onclick="addToCart(this)">Добавить в корзину</button>
      </div>
      <div class="product" data-name="Премиум-Эдишн" data-price="19.00">
        <img src="images/product-3.jpg" alt="Премиум-Эдишн">
        <h3>Премиум-Эдишн</h3>
        <div class="price">$19.00</div>
        <button class="btn" onclick="addToCart(this)">Добавить в корзину</button>
      </div>
    </div>
  </main>

  <script>
    function getCart(){
      return JSON.parse(localStorage.getItem("cart")||"[]");
    }
    function saveCart(cart){
      localStorage.setItem("cart",JSON.stringify(cart));
    }
    function updateCartCount(){
      document.getElementById("cartCount").innerText = getCart().length;
    }
    function addToCart(btn){
      const productEl = btn.closest(".product");
      const name = productEl.dataset.name;
      const price = productEl.dataset.price;
      let cart = getCart();
      cart.push({name,price});
      saveCart(cart);
      updateCartCount();
      alert(name+" добавлен в корзину!");
    }
    updateCartCount();
  </script>
</body>
</html>
